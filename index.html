# Build the requested compact layout:
# - Less whitespace in top inputs
# - Sliders on the same level
# - 6 charts in a 3×2 grid, smaller height so everything fits on one screen
html = r"""<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>HSML MIDCARE© — Over 75 Admissions (Compact 3×2)</title>
<style>
  :root{
    --bg:#ffffff; --panel:#f8fafc; --ink:#111111; --muted:#6b7280; --border:#e5e7eb;
    --navy:#1e3a8a; --teal:#0d9488; --card:#ffffff;
    --sliderH: 24px;
  }
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
  header{padding:10px 12px;border-bottom:1px solid var(--border);background:#fff}
  .title-row{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
  .title-logo{height:38px;width:auto}
  h1{margin:0;font-size:18px;letter-spacing:.2px;color:var(--navy)}
  .container{max-width:1180px;margin:10px auto 18px;padding:0 10px}
  .card{background:var(--panel);border:1px solid var(--border);border-radius:12px;padding:8px;box-shadow:0 2px 8px rgba(0,0,0,.04)}

  /* --- Controls (top) --- */
  .controls{display:grid;grid-template-columns:repeat(5,1fr);gap:6px}
  .group{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:8px;display:grid;gap:4px}
  .group.slider{grid-template-rows:18px var(--sliderH) 0px}
  .group.input{grid-template-rows:16px auto}
  .label-top{font-size:12px;color:var(--ink);line-height:1.15;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .hint{display:none} /* removed to reduce vertical space */

  input[type="number"],input[type="text"],select{width:100%;padding:6px 8px;border-radius:8px;border:1px solid var(--border);background:#fff;color:var(--ink);font-size:14px}

  input[type="range"]{width:100%;height:var(--sliderH);appearance:none;background:transparent}
  input[type="range"]::-webkit-slider-runnable-track{height:6px;border-radius:999px;background:linear-gradient(90deg,var(--navy),var(--teal))}
  input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;margin-top:-6px;width:14px;height:14px;border-radius:50%;background:#fff;border:2px solid var(--teal);box-shadow:0 2px 5px rgba(0,0,0,.18)}
  input[type="range"]::-moz-range-track{height:6px;border-radius:999px;background:linear-gradient(90deg,var(--navy),var(--teal))}
  input[type="range"]::-moz-range-thumb{width:14px;height:14px;border-radius:50%;background:#fff;border:2px solid var(--teal)}

  .controls-footer{display:flex;gap:6px;align-items:center;flex-wrap:wrap;margin-top:6px}
  .btn{background:var(--navy);color:#fff;border:1px solid var(--navy);padding:6px 10px;border-radius:8px;font-weight:700;cursor:pointer;font-size:13px}
  .btn.alt{background:var(--teal);border-color:var(--teal)}
  .btn:hover{filter:brightness(.96)}
  .right-grow{margin-left:auto;font-size:12px;color:var(--muted)}

  /* Charts 3×2 */
  .charts{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:8px}
  .plot.card{padding:6px;background:#fff}
  .plot h3{margin:2px 0 6px;font-size:12px;color:var(--ink);font-weight:700}
  svg.chart{width:100%;height:170px;display:block;background:#ffffff;border-radius:8px;border:1px solid var(--border)}

  /* Optional KPIs (collapsed by default) */
  details.kpiwrap{margin-top:6px}
  details.kpiwrap summary{cursor:pointer;color:var(--muted);font-size:12px}
  .kpis{display:grid;grid-template-columns:repeat(5,1fr);gap:6px;margin-top:6px}
  .kpi{padding:6px;border-radius:8px;background:#fff;border:1px solid var(--border)}
  .kpi .label{font-size:12px;color:var(--muted)}
  .kpi .val{font-size:15px;margin-top:2px;color:var(--navy);font-weight:800}

  @media (max-width:1180px){.container{max-width:1100px}}
  @media (max-width:980px){
    .controls{grid-template-columns:repeat(3,1fr)}
    .charts{grid-template-columns:1fr 1fr}
  }
</style>
</head>
<body>
<header>
  <div class="title-row">
    <img class="title-logo" src="https://assets.zyrosite.com/AoP61N2BR4i8Q6jl/logo-hsml-AE07eKDgMLFgWBoQ.png" alt="HSML Logo">
    <h1>HSML MIDCARE© — Over 75 Admissions (Compact 3×2)</h1>
  </div>
</header>

<div class="container">

  <!-- CONTROLS: two tight rows -->
  <section class="card">
    <!-- Sliders row -->
    <div class="controls">
      <div class="group slider">
        <div class="label-top">Annual growth rate (raw, ≥75): <b id="growth_rate_val">0.10</b></div>
        <input id="growth_rate" type="range" min="0" max="0.15" value="0.10" step="0.001">
      </div>
      <div class="group slider">
        <div class="label-top">Annual mortality/discharge rate (≥75): <b id="mortality_rate_val">0.05</b></div>
        <input id="mortality_rate" type="range" min="0.00" max="0.12" value="0.05" step="0.001">
      </div>
      <div class="group slider">
        <div class="label-top">ED attendance rate (per 1,000/yr): <b id="ed_rate_val">900</b></div>
        <input id="ed_rate" type="range" min="300" max="1500" value="900" step="10">
      </div>
      <div class="group slider">
        <div class="label-top">Admission rate from ED (≥75): <b id="admission_rate_val">0.55</b></div>
        <input id="admission_rate" type="range" min="0.30" max="0.80" value="0.55" step="0.01">
      </div>
      <div class="group slider">
        <div class="label-top">Mean length of stay (days): <b id="los_days_val">6.5</b></div>
        <input id="los_days" type="range" min="3" max="20" value="6.5" step="0.1">
      </div>
    </div>

    <!-- Inputs row -->
    <div class="controls" style="margin-top:6px;">
      <div class="group input">
        <div class="label-top">Initial population ≥75 (people)</div>
        <input id="initial_pop" type="number" min="0" max="100000" value="30000" step="100">
      </div>
      <div class="group input">
        <div class="label-top">Unit cost per admission (€)</div>
        <input id="unit_cost" type="number" min="0" max="20000" step="100" value="5800">
      </div>
      <div class="group input">
        <div class="label-top">Start year</div>
        <input id="start_year" type="number" value="2015" step="1">
      </div>
      <div class="group input">
        <div class="label-top">End year</div>
        <input id="end_year" type="number" value="2050" step="1">
      </div>
      <div class="group input">
        <div class="label-top">Time step &amp; price label</div>
        <div style="display:flex;gap:6px">
          <select id="dt" style="flex:0 0 74px"><option value="0.25" selected>0.25</option><option value="0.5">0.5</option><option value="1">1.0</option></select>
          <input id="price_year" type="text" value="Specify (e.g., 2024 €)" style="flex:1">
        </div>
      </div>
    </div>

    <div class="controls-footer">
      <button id="run" class="btn">Run</button>
      <button id="reset" class="btn alt">Reset</button>
      <label class="right-grow">
        <input id="autoupd" type="checkbox" checked> Auto-update on change
      </label>
    </div>
  </section>

  <!-- Optional KPIs (collapsed to keep one-screen layout) -->
  <details class="kpiwrap">
    <summary>Show KPIs</summary>
    <div class="kpis">
      <div class="kpi"><div class="label">Population ≥75 (final)</div><div id="kpi_pop" class="val">—</div></div>
      <div class="kpi"><div class="label">ED attendances / yr (final)</div><div id="kpi_att" class="val">—</div></div>
      <div class="kpi"><div class="label">Admissions / yr (final)</div><div id="kpi_adm" class="val">—</div></div>
      <div class="kpi"><div class="label">Bed-days / yr (final)</div><div id="kpi_bd" class="val">—</div></div>
      <div class="kpi"><div class="label">Total cost / yr (final)</div><div id="kpi_cost" class="val">—</div></div>
    </div>
  </details>

  <!-- CHARTS: 3 across × 2 down -->
  <section class="charts">
    <div class="plot card"><h3>Population ≥75</h3>
      <svg id="svg_pop" class="chart"></svg>
    </div>
    <div class="plot card"><h3>ED Attendances per year</h3>
      <svg id="svg_att" class="chart"></svg>
    </div>
    <div class="plot card"><h3>Admissions per year</h3>
      <svg id="svg_adm" class="chart"></svg>
    </div>
    <div class="plot card"><h3>Cumulative admissions</h3>
      <svg id="svg_cum" class="chart"></svg>
    </div>
    <div class="plot card"><h3>Bed-days per year</h3>
      <svg id="svg_bd" class="chart"></svg>
    </div>
    <div class="plot card"><h3>Total cost per year (<span id="price_lbl"></span>)</h3>
      <svg id="svg_cost" class="chart"></svg>
    </div>
  </section>
</div>

<script>
document.addEventListener('DOMContentLoaded', function(){
  const q = (id)=>document.getElementById(id);
  const fmt0 = (n)=>Math.round(Number(n)).toLocaleString();
  const fmtEUR = (n)=>"€ "+Math.round(Number(n)).toLocaleString();

  function num(val, fallback){ const x = parseFloat(val); return Number.isFinite(x) ? x : fallback; }

  function readParams(){
    let start = num(q("start_year").value, 2015);
    let end   = num(q("end_year").value, 2050);
    if(end < start){ end = start; q("end_year").value = end; }
    return {
      initial_pop:      num(q("initial_pop").value, 30000),
      growth_rate:      num(q("growth_rate").value, 0.10),
      mortality_rate:   num(q("mortality_rate").value, 0.05),
      ed_rate_per_1000: num(q("ed_rate").value, 900),
      admission_rate:   num(q("admission_rate").value, 0.55),
      los_days:         num(q("los_days").value, 6.5),
      unit_cost_eur:    num(q("unit_cost").value, 5800),
      start_year: start, end_year: end, dt: num(q("dt").value, 0.25),
      price_year: q("price_year").value || ""
    };
  }

  function simulate(p){
    const t=[]; for(let x=p.start_year; x<=p.end_year+1e-9; x+=p.dt){ t.push(Number(x.toFixed(6))); }
    const n=t.length;
    const pop=new Array(n).fill(0), attend=new Array(n).fill(0), adm=new Array(n).fill(0),
          bd=new Array(n).fill(0), cost=new Array(n).fill(0), cum=new Array(n).fill(0);

    pop[0]=p.initial_pop;
    for(let i=1;i<n;i++){
      const net = (p.growth_rate - p.mortality_rate);
      pop[i] = Math.max(0, pop[i-1] + net * pop[i-1] * p.dt);
    }
    for(let i=0;i<n;i++){
      const a = pop[i] * (p.ed_rate_per_1000 / 1000.0);
      const m = a * p.admission_rate;
      attend[i]=a; adm[i]=m; bd[i]=m*p.los_days; cost[i]=m*p.unit_cost_eur;
      cum[i] = (i===0?0:cum[i-1] + m*p.dt);
    }
    return {t,pop,attend,adm,bd,cost,cum};
  }

  // Compact light theme line plotter
  function lineChart(svg, series){
    const W=svg.clientWidth||900, H=svg.clientHeight||170;
    svg.setAttribute('viewBox', `0 0 ${W} ${H}`);
    while(svg.firstChild) svg.removeChild(svg.firstChild);

    const m={t:8,r:10,b:20,l:46}, w=W-m.l-m.r, h=H-m.t-m.b;
    const t=series.t, y=series.y;
    if(!t || !y || t.length===0 || y.length===0){ return; }

    let minX=Math.min(...t), maxX=Math.max(...t);
    let minY=Math.min(...y), maxY=Math.max(...y);
    if(!isFinite(minY) || !isFinite(maxY)){ minY=0; maxY=1; }
    if(minY===maxY){ maxY = minY + 1; }

    const scaleX=(v)=>m.l + (w*(v-minX))/(maxX-minX);
    const scaleY=(v)=>m.t + h - (h*(v-minY))/(maxY-minY);

    const NS='http://www.w3.org/2000/svg';
    const line=(a)=>{ const el=document.createElementNS(NS,'line'); for(const k in a) el.setAttribute(k,a[k]); return el; };
    const text=(a,txt)=>{ const el=document.createElementNS(NS,'text'); for(const k in a) el.setAttribute(k,a[k]); el.textContent=txt; return el; };
    const polyline=(pts)=>{ const el=document.createElementNS(NS,'polyline'); el.setAttribute('points',pts); el.setAttribute('fill','none'); el.setAttribute('stroke', '#1e3a8a'); el.setAttribute('stroke-width','2'); return el; };

    // axes
    svg.appendChild(line({x1:m.l,y1:H-m.b,x2:W-m.r,y2:H-m.b,stroke: '#cbd5e1','stroke-width':1}));
    svg.appendChild(line({x1:m.l,y1:m.t,x2:m.l,y2:H-m.b,stroke: '#cbd5e1','stroke-width':1}));

    // ticks (3 each to stay compact)
    for(let i=0;i<=3;i++){
      const xt=minX + (i*(maxX-minX))/3, lx=scaleX(xt), ly=H-m.b;
      svg.appendChild(line({x1:lx,y1:ly,x2:lx,y2:ly+3,stroke:'#cbd5e1','stroke-width':1}));
      svg.appendChild(text({x:lx,y:ly+12,fill:'#475569','font-size':9,'text-anchor':'middle'}, Math.round(xt)));
    }
    for(let i=0;i<=3;i++){
      const yt=minY + (i*(maxY-minY))/3, ly=scaleY(yt);
      svg.appendChild(line({x1:m.l-3,y1:ly,x2:m.l,y2:ly,stroke:'#cbd5e1','stroke-width':1}));
      svg.appendChild(text({x:m.l-6,y:ly+3,fill:'#475569','font-size':9,'text-anchor':'end'}, Math.round(yt).toLocaleString()));
    }

    // series
    let pts="";
    for(let i=0;i<t.length;i++){ pts += `${scaleX(t[i])},${scaleY(y[i])} `; }
    svg.appendChild(polyline(pts.trim()));
  }

  function updateKpis(sim){
    if (!document.querySelector('.kpiwrap[open]')) return;
    const i=sim.t.length-1;
    const qid = (id,val)=>{ const el = document.getElementById(id); if(el) el.textContent = val; };
    qid("kpi_pop",  fmt0(sim.pop[i]));
    qid("kpi_att",  fmt0(sim.attend[i]));
    qid("kpi_adm",  fmt0(sim.adm[i]));
    qid("kpi_bd",   fmt0(sim.bd[i]));
    qid("kpi_cost", fmtEUR(sim.cost[i]));
  }

  function recalc(){
    const p=readParams();
    document.getElementById("price_lbl").textContent=p.price_year;
    const sim=simulate(p);

    lineChart(q("svg_pop"),  {t:sim.t,y:sim.pop});
    lineChart(q("svg_att"),  {t:sim.t,y:sim.attend});
    lineChart(q("svg_adm"),  {t:sim.t,y:sim.adm});
    lineChart(q("svg_cum"),  {t:sim.t,y:sim.cum});
    lineChart(q("svg_bd"),   {t:sim.t,y:sim.bd});
    lineChart(q("svg_cost"), {t:sim.t,y:sim.cost});

    updateKpis(sim);
  }

  // Bind inputs safely
  const inputs = ["initial_pop","growth_rate","mortality_rate","ed_rate","admission_rate","los_days","unit_cost","start_year","end_year","dt","price_year"];
  function bind(){
    inputs.forEach(id=>{
      ["input","change"].forEach(evt=>{
        q(id).addEventListener(evt,()=>{
          if(!q("autoupd").checked) return;
          if(id==="growth_rate") q("growth_rate_val").textContent=q(id).value;
          if(id==="mortality_rate") q("mortality_rate_val").textContent=q(id).value;
          if(id==="ed_rate") q("ed_rate_val").textContent=q(id).value;
          if(id==="admission_rate") q("admission_rate_val").textContent=q(id).value;
          if(id==="los_days") q("los_days_val").textContent=q(id).value;
          recalc();
        });
      });
    });

    q("run").addEventListener("click", recalc);

    q("reset").addEventListener("click", ()=>{
      q("initial_pop").value=30000;
      q("growth_rate").value=0.10; q("growth_rate_val").textContent="0.10";
      q("mortality_rate").value=0.05; q("mortality_rate_val").textContent="0.05";
      q("ed_rate").value=900; q("ed_rate_val").textContent="900";
      q("admission_rate").value=0.55; q("admission_rate_val").textContent="0.55";
      q("los_days").value=6.5; q("los_days_val").textContent="6.5";
      q("unit_cost").value=5800;
      q("start_year").value=2015; q("end_year").value=2050; q("dt").value=0.25; q("price_year").value="Specify (e.g., 2024 €)";
      recalc();
    });

    window.addEventListener("resize", recalc);
    document.querySelector('details.kpiwrap').addEventListener('toggle', recalc);
  }

  bind();
  recalc(); // initial render
});
</script>
</body>
</html>
"""
path = "/mnt/data/hsml_midcare_over75_compact_3x2.html"
with open(path, "w", encoding="utf-8") as f:
    f.write(html)
print(path)










